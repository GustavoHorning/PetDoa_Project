<header class="header">
  <h1 class="logo" routerLink="/"> 
    <svg class="emoji" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="24" height="24">
      <path fill="#F4D35E" d="M256 288c-56 0-96 48-96 96 0 48 56 80 96 80s96-32 96-80c0-48-40-96-96-96zm-104-16c-31 0-56-29-56-64s25-64 56-64 56 29 56 64-25 64-56 64zm208 0c-31 0-56-29-56-64s25-64 56-64 56 29 56 64-25 64-56 64zm-160-80c0 35-25 64-56 64s-56-29-56-64 25-64 56-64 56 29 56 64zm192 0c0 35-25 64-56 64s-56-29-56-64 25-64 56-64 56 29 56 64z" />
    </svg>
    Pet<span class="destaque">Doa</span>
  </h1>

  <nav *ngIf="!isUserLoggedIn">
    <a routerLink="/" routerLinkActive="ativo" [routerLinkActiveOptions]="{exact: true}">Início</a>
    <a routerLink="/cadastro" routerLinkActive="ativo">Cadastro</a>
    <a routerLink="/login" [queryParams]="{ returnUrl: '/doar-page' }" routerLinkActive="ativo">Doar</a>
    <a routerLink="/login" routerLinkActive="ativo">Login</a>
  </nav>

  <nav *ngIf="isUserLoggedIn">
    <a routerLink="/dashboard" routerLinkActive="ativo">Meu Painel</a>
    <a routerLink="/minhas-doacoes" routerLinkActive="ativo">Minhas Doações</a>
    <a routerLink="/" routerLinkActive="ativo" [routerLinkActiveOptions]="{exact: true}">Início</a>
  </nav>

  <!-- <div *ngIf="isUserLoggedIn" class="usuario-dashboard">
    <button (click)="toggleUserModal()" class="user-button">
      <img *ngIf="userImageUrl" [src]="userImageUrl" alt="Avatar" class="avatar" />
      <div *ngIf="!userImageUrl && userInitials" 
           class="initials-avatar" 
           [style.backgroundColor]="avatarBackgroundColor">
        <span>{{ userInitials }}</span>
      </div>
    </button>

    <app-profile-modal
  *ngIf="showUserModal && currentUserProfile"
  [profileData]="currentUserProfile"
  (closeModal)="toggleUserModal()"
  (profileUpdated)="onProfileUpdated()"
  (logoutClicked)="logout()"> 
</app-profile-modal>
  </div> -->


  <div *ngIf="isUserLoggedIn" class="usuario-dashboard">
    <button (click)="toggleProfileDropdown()" class="user-button" type="button" aria-label="Menu do usuário">
      <img *ngIf="userImageUrl" [src]="userImageUrl" alt="Avatar" class="avatar" />
      <div *ngIf="!userImageUrl && userInitials"
           class="initials-avatar"
           [style.backgroundColor]="avatarBackgroundColor">
        <span>{{ userInitials }}</span>
      </div>
    </button>

    <div *ngIf="showProfileDropdown" class="profile-dropdown">
      <div class="dropdown-header" *ngIf="currentUserProfile">
        <strong>{{ currentUserProfile.name }}</strong>
        <span class="dropdown-email" *ngIf="currentUserProfile.email">{{ currentUserProfile.email }}</span>
      </div>
      <ul>
        <li>
          <button type="button" (click)="openEditProfileModal()"> 
            <i class="fas fa-user-edit"></i>
            Editar Perfil
          </button>
        </li>
        <li>
          <button type="button" (click)="logout()"> 
            <i class="fas fa-sign-out-alt"></i> 
            Sair
          </button>
        </li>
      </ul>
    </div>
  </div>

  <app-profile-modal
    *ngIf="showProfileEditModal && currentUserProfile"
    [profileData]="currentUserProfile"
    (closeModal)="closeEditProfileModal()"
    (profileUpdated)="onProfileUpdated()"
    (logoutClicked)="logout()">
  </app-profile-modal>




</header>

<div *ngIf="toastVisible" class="toast">
  {{ toastMessage }}
</div>